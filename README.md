Вот улучшенная версия вашего `README.md` файла с использованием Markdown для более красивого оформления. Я добавил заголовки, списки, выделения и другие элементы для лучшей читаемости:

---

# Подготовка виртуальной машины к шаблону

Подготовка виртуальной машины к шаблону включает очистку системы, настройку имени хоста и сети, удаление SSH-ключей и отключение ненужных служб. Эти шаги гарантируют, что каждая новая виртуальная машина, созданная из шаблона, будет работать корректно и не будет иметь конфликтов с другими машинами.

После завершения подготовки выключите виртуальную машину и преобразуйте её в шаблон в **Proxmox**.

---

## Что делает скрипт?

Скрипт выполняет следующие шаги:

### 1. Очистка системы
- Удаляет временные файлы (`/tmp`, `/var/tmp`).
- Очищает логи (`/var/log/*`).
- Удаляет кэши пакетов и ненужные пакеты:
  ```bash
  sudo apt clean && sudo apt autoclean && sudo apt autoremove --purge
  ```

### 2. Настройка имени хоста и сети
- Обнуляет имя хоста:
  ```bash
  sudo hostnamectl set-hostname localhost
  ```
- Очищает файл `/etc/hosts`, оставляя только базовые записи:
  ```plaintext
  127.0.0.1   localhost
  ::1         localhost ip6-localhost ip6-loopback
  ```

### 3. Удаление SSH-ключей
- Удаляет существующие SSH-ключи для генерации новых при первом запуске:
  ```bash
  sudo rm -f /etc/ssh/ssh_host_*
  ```

### 4. Отключение служб
- Отключает службы, которые могут мешать работе шаблона:
  ```bash
  sudo systemctl disable --now systemd-resolved NetworkManager
  ```

### 5. Очистка истории команд
- Удаляет историю выполненных команд:
  ```bash
  history -c && sudo history -c
  sudo rm -f ~/.bash_history /root/.bash_history
  ```

---

## Список команд

Для использования скрипта выполните следующие шаги:

1. **Загрузить скрипт:**
   ```bash
   wget https://raw.githubusercontent.com/Kudesnik-IT/vm-template/refs/heads/main/prepare_for_template.sh
   ```

2. **Установить права на выполнение:**
   ```bash
   chmod +x prepare_for_template.sh
   ```

3. **Выполнить скрипт:**
   ```bash
   ./prepare_for_template.sh
   ```

---

## Важные замечания

- **Резервное копирование:** Перед выполнением скрипта убедитесь, что все важные данные сохранены. После выполнения скрипта система станет непригодной для дальнейшего использования как обычная машина.
- **Генерация новых SSH-ключей:** После первого запуска новой виртуальной машины не забудьте сгенерировать новые SSH-ключи:
  ```bash
  sudo dpkg-reconfigure openssh-server
  ```
- **Обновление UUID:** Если вы клонируете виртуальную машину, не забудьте сбросить UUID разделов, чтобы избежать конфликтов.

---

## Полезные ссылки

- [Proxmox Documentation](https://pve.proxmox.com/wiki/Main_Page)
- [Debian Cloud Images](https://cdimage.debian.org/images/cloud/)
- [GitHub Repository](https://github.com/Kudesnik-IT/vm-template)
